(function(D,c){var E="scombobox";var y="."+E;var k="-display",O="-value",w="-invalid",B=k+"-div",l=B+"-item",K=l+"-remove",P=B+"-holder",n="-list",t="-mainspan",i="-hovered",g="-separator",e="-header",b="-dropdown-background",d="-dropdown-arrow",L="-disabled";var v=false;function z(Q){return({fast:200,normal:400,slow:600})[Q]||Q}var r=parseInt;var F={init:function(){var Y=this.find(y+n),U=this.find("select"),X=this.find(y+b),S=this.find(y+d);var Q=this.data(E);this.addClass(E);if(U.length==0){this.append(D("<select />"))}if(this.attr("id")){U.removeAttr("id")}if(U.attr("multiple")){this.data(E).mode="checkboxes"}if(X.length==0){this.append('<div class="'+E+b+'" />')}if(S.length==0){this.append('<div class="'+E+d+'" />')}F.displayDropdown.call(this,Q.showDropDown);if(Q.mode!="checkboxes"){if(this.find(y+k).length==0){var T=D('<input class="'+E+k+'" type="text"/>');this.append(T);this.height(+T.css("font-size")+ +T.css("padding-top")+ +T.css("padding-bottom"))}}if(Q.tabindex!=null){this.find(y+k).attr("tabindex",Q.tabindex)}if(this.find(y+O).length==0){this.append('<input class="'+E+O+'" type="hidden" />')}if(this.find(y+k).is(":disabled")||Q.disabled){this.find(y+b+", "+y+d).hide()}if(Q.disabled){this.find(y+k).prop("disabled",true);this.addClass(E+L)}if(!Q.editAble){this.find(y+k).prop("disabled",true)}if(Y.length==0){this.append(Y=D('<div class="'+E+n+'"></div>'))}if(Q.mode=="checkboxes"){this.addClass(E+"-checkboxes");this.find(y+k).remove();var W=this.find(y+k+"-div");if(W.length==0){this.append('<div class="'+E+B+'"><div class="'+E+P+'" /></div>')}Y.insertAfter(this.find(y+k+"-div"));var V=this.find(y+P);var R=D('<div class="'+E+l+'" id="'+E+'-test-item"><div class="'+E+l+'-text">x</div></div>');V.append(R.css("margin-left","-9999px").show());var Z=R.height()+r(R.css("padding-top"))+r(R.css("padding-top"))+r(R.css("margin-top"))+r(R.css("margin-top"))+r(R.css("border-top-width"))+r(R.css("border-top-width"))+r(V.css("padding-top"))+r(V.css("padding-top"));this.find(y+k+"-div").css("min-height",Z+"px");R.remove()}else{this.find(y+"-display-div").remove();Y.insertAfter(this.find(y+k))}Y.css({"max-width":Q.listMaxWidth,"max-height":Q.maxHeight});if(Q.wrap==true){Y.css("white-space","normal")}if(Q.autoLoad!=D.noop){Q.loopScrolling=false}N.call(this);this.data(E+"-init",true);return F.fill.call(this,Q.data)},fill:function(V,W){var Q=this.find("select").children("option, optgroup");var R=this.find("."+E+n),T=this.find("select");V=x(V);var U=this.data(E);var X=U.mode;if(!V){if(U.removeDuplicates){h(Q);u(Q);Q=this.find("select").children("option, optgroup")}if(Q.length==0){}else{Q.each(function(){var ab=D(this);var Z=D("<p />");if(ab.hasClass(E+g)){if(ab.hasClass(E+e)){R.append(Z.addClass(E+e).text(ab.text()))}else{Z.addClass(E+g)}}else{if(this.tagName.toLowerCase()=="optgroup"){var Y=ab.attr("label");var aa=D("option",this);ab.before("<option />");ab.after(aa);ab.remove();R.append(Y?Z.addClass(E+e).text(Y):Z.addClass(E+g));aa.each(function(){R.append(D("<p />").append(D('<span class="'+E+t+'" />').text(D(this).text())).data("value",this.value))});return}else{Z.append(D('<span class="'+E+t+'" />').text(ab.text())).data("value",this.value);if(X=="checkboxes"){Z.prepend('<input type="checkbox" />')}}}R.append(Z)})}}else{if(U.removeDuplicates){q(V)}C(V);if(U.sort){V.sort(m);if(!U.sortAsc){V.reverse()}}if(!W){T.empty();R.empty();this.children(y+O+", "+y+k).val("")}J.call(this,V,W==2)}if(this.data(E+"-init")){U.callback.func.apply(this,U.callback.args);this.data(E+"-init",false)}Q=this.find("select").children("option");if(!U.empty){if(X!="checkboxes"){this[E]("val",Q.filter("option:selected:last").val())}else{var S=Q.filter(":selected").map(function(){return D(this).val()}).get();this[E]("val",S)}}return this},clear:function(){this.children("select").empty();this.children(y+n).empty().width("");this.children(y+k).removeClass(E+w);this.children(y+b).removeClass(E+b+w);return this},data:function(Q){if(arguments.length==0){return this.data(E).data}else{this.data(E).data=Q}return this},disabled:function(Q){var S=this.data(E).mode;if(arguments.length==0){if(S=="checkboxes"){return this.hasClass(E+L)}else{return this.children(y+k).prop("disabled")}}Q=!!Q;this.children(y+k).prop("disabled",Q);if(Q){this.addClass(E+L);this.children(y+b+", "+y+d).hide()}else{this.removeClass(E+L);this.children(y+b+", "+y+d).show()}var R=this.data(E).editAble;if(S!="checkboxes"&&!R){this.find(y+k).prop("disabled",true)}return this},tabindex:function(Q){var R=this.find(y+k);if(arguments.length==0){return R.attr("tabindex")}else{R.attr("tabindex",Q);return this}},options:function(Q){if(arguments.length==0){return this.data(E)}D.extend(true,this.data(E),p(Q));return this},val:function(Q){var R=this.data(E),U=R.mode,T=!R.forbidInvalid&&R.invalidAsValue;if(arguments.length==0){if(U=="default"){var S=this.find(y+O).val();S=!T?S:(S?S:this.find(y+k).val())}if(!R.editAble&&!R.disabled){return U=="default"?S:(U=="checkboxes"?A.call(this):null)}else{return U=="default"?(this.find(y+k).is(":disabled")?"":S):(U=="checkboxes"?A.call(this):null)}}else{if(U=="default"){H.call(this,Q)}else{if(U=="checkboxes"){G.call(this,Q)}}}return this},open:function(){a.call(this.children(y+n),"down");return this},close:function(){a.call(this.children(y+n),"up");return this},change:function(R,Q){return s.call(this,"change",this.children(y+O),R,Q)},focus:function(R,Q){return s.call(this,"focus",this.children(y+k),R,Q)},blur:function(R,Q){return s.call(this,"blur",this.children(y+k),R,Q)},keyup:function(R,Q){return s.call(this,"keyup",this.children(y+k),R,Q)},keydown:function(R,Q){return s.call(this,"keydown",this.children(y+k),R,Q)},keypress:function(R,Q){return s.call(this,"keypress",this.children(y+k),R,Q)},click:function(R,Q){return s.call(this,"click",this.children(y+k),R,Q)},mousedown:function(R,Q){return s.call(this,"mousedown",this.children(y+k),R,Q)},clickDropdown:function(R,Q){return s.call(this,"click",this.children(y+d),R,Q)},toSelect:function(){var Q=this.children("select").insertAfter(this);if(this.data(E).reassignId){Q.attr("id",this.attr("id"))}this.remove();return Q},displayDropdown:function(Q){if(arguments.length){if(!!Q){this.children(y+d+", "+y+b).show()}else{this.children(y+d+", "+y+b).hide()}}else{if(this.data(E).showDropdown){this.children(y+d+", "+y+b).show()}else{this.children(y+d+", "+y+b).hide()}}return this}};function s(S,Q,U,R){if(typeof U!="function"){var T=S+(typeof U=="string"?"."+U:(typeof R=="string"?"."+R:""));Q.trigger(T)}else{f.call(Q,S,U,R)}return this}function f(R,T,Q){var S=R+(typeof Q=="string"?"."+Q:"");this.bind(S,T)}function A(){return JSON.parse(this.find(y+O).val()||"[]")}function o(){var R=D(this).find(y+n+" p"),Q=D(this).children(y+O),S=[];R.each(function(){var T=D(this);var U=T.find(":checkbox");if(U.prop("checked")){S.push(T.data("value"))}});D(this).children("select").val(S);Q.val(JSON.stringify(S))}function G(Q){var U=D(this).find(y+n+" p"),T=D(this).children(y+O),X=[];var V;for(var S=0;S<U.length;S++){var R=U.eq(S),W=Q.indexOf(R.data("value"));if(Q.indexOf(R.data("value"))>=0){V=R.find(":checkbox").prop("checked",true);X.push(Q[W])}else{R.find(":checkbox").prop("checked",false)}}D(this).children("select").val(Q);V.trigger(E+"-chupdate",[true]);T.val(JSON.stringify(X))}function H(U){var V=D(this);var R=V.children("select"),T=V.children(y+O),S=V.children(y+k);var Q=R.children('[value="'+U+'"]');if(Q.length==0){R.children().prop("selected",false);T.val("");S.val("");return}R.val(U).change();V.find(y+O).val(U)}function N(){if(this.data("listenersAdded")){return}var R=this,Q=R.data(E);this.on("keyup",y+k+", "+y+B,function(X){if([13,38,40,9].indexOf(X.which)>=0){return}var W=Q.fullMatch,U=Q.highlight;if(W){U=U!==false}else{U=!!U}var Z=D(this),V=this.value.trim();if(Q.filterIgnoreCase){V=V.toLowerCase()}var T=Z.closest(y).children(y+n);a.call(T,"down",true);var S=Z.closest(y).find("select option");D(y+" "+y+n).each(function(){if(T[0]!=this){a.call(D(this),"up")}});if(!V){T.children("p").show().each(function(){D(y+"-marker",this).contents().unwrap()});return}var Y=Q.hideSeparatorsOnSearch?"p":"p:not("+y+g+", "+y+e+")";T.children(Y).hide();S.each(function(){var ad=D(this).text().trim();if(Q.filterIgnoreCase){ad=ad.toLowerCase()}if(W?ad.indexOf(V)>=0:ad.indexOf(V)==0){var ab=Q.filterIgnoreCase?"i":"";var aa=new RegExp(V.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),W?ab+"g":ab);var ac=T.children("p:eq("+S.index(this)+"):not("+y+g+", "+y+e+")").show();if(U){ac.each(function(){D(y+"-marker",this).contents().unwrap();var ae=D(y+t,this)[0];ae.innerHTML=ae.innerHTML.replace(aa,'<span class="'+E+'-marker">'+V+"</span>")})}}})});this.on("keydown",y+k,function(aa){if([38,40,13,27,9].indexOf(aa.which)>=0){if(aa.which!=9){aa.preventDefault()}var X=D(this).closest(y);var ac=X.children(y+n);var ab=D(y+i,ac[0]),ag,U;var W=D("p:first",ac[0]);var V=Q.loopScrolling;var Z=":not("+y+g+", "+y+e+")"}else{return}var af=Q.mode=="default"?Q.fillOnArrowPress:false;if(ac.is(":animated")){return}var ae=this.value.trim().toLowerCase();var T=ac.scrollTop();if(aa.which==40){if(ac.is(":hidden")){a.call(ac,"down");return}if(ab.length==0){if(W.is(":visible"+Z)){ag=W.addClass(E+i)}else{ag=W.nextAll(":visible"+Z).first().addClass(E+i)}}else{if(!V){if(!ab.nextAll(":visible"+Z).first().length){return}}ag=ab.removeClass(E+i).nextAll(":visible"+Z).first().addClass(E+i);if(ag.length==0){if(W.is(":visible")){ag=W.addClass(E+i)}else{ag=W.nextAll(":visible"+Z).first().addClass(E+i)}}if(ag.length==0){ag=W}U=ag.position().top-ac.position().top;var ad=ag.outerHeight();if(U+ad*6>ac.height()){if((U+ad*6)-ac.height()>ad*1.5){ac.scrollTop(T+U)}else{ac.scrollTop(T+ad)}}else{if(U<0){ac.scrollTop(T- -U)}}}if(af){this.value=ag.find(y+t).text();X.children(y+k).data("fillonarrow",true)}}else{if(aa.which==38){if(ac.is(":visible")){if(!V){if(!ab.prevAll(":visible"+Z).first().length){return}}ag=ab.removeClass(E+i).prevAll(":visible"+Z).first().addClass(E+i);if(ag.length==0){ag=D("p:visible"+Z+":last",ac[0]).addClass(E+i)}U=ag.position().top-ac.position().top;ad=ag.outerHeight();if(U<ad*3){ac.scrollTop(T- -U-ad*3)}else{if(U>ac.height()-ad*3){ac.scrollTop(T+U-ad*3)}}if(af){this.value=ag.find(y+t).text();X.children(y+k).data("fillonarrow",true)}}}else{if(aa.which==13){if(Q.fillOnBlur){j(ac).click();return}var S=false;ac.children("p").each(function(){if(D(y+t,this).text().trim().toLowerCase()==ae){D(this).click();S=true}});if(S==false){ac.children(y+i).click()}if(Q.mode=="default"){a.call(ac,"up")}}else{if(aa.which==27){a.call(D(this).blur().closest(y).children(y+n),"up")}else{if(aa.which==9){if(Q.fillOnTab){if(ae){var Y=ac.children("p:visible:first");if(Y.length){aa.preventDefault();ac.children("p:visible:first").click()}}}}}}}}});this.on("change","select",function(W,S){var U=D(this).closest(y);var T=D("option:selected",this).text();U.children(y+k).val(T).data("value",T);var V=U.children(y+O);if(V.data("changed")){V.data("changed",false);return}if(S){o.call(U);V.change();return}V.change();a.call(U.children(y+n),"up")});this.on(E+"-chupdate",y+n+" p :checkbox",function(T,S){if(S){T.stopPropagation();M.call(D(this).parent(),T,true)}});this.on("click",y+n+" p",function(W){W.stopPropagation();if(D(this).is(y+g+", "+y+e)){return}R.children(y+w).removeClass(E+w);R.children(y+b).removeClass(E+b+w);var X=D(this),S=X.parent(),V=S.children();var U=V.index(this);if(R.data(E).mode=="checkboxes"){M.call(this,W);return}var T=S.closest(y).children("select");T.children("option").eq(U).prop("selected",true);T.siblings(y+O).val(T.val());T.change();a.call(X.parent(),"up");X.addClass(E+i).siblings().removeClass(E+i)});this.on("blur",y+k,function(){var Y=D(this),X=R.data(E);if(X.fillOnBlur){j(Y.parent().children(y+n)).click();return}var W=Y.val().trim(),T=W.toLowerCase();var V=Y.siblings(y+O);var S=V.val();if(T==""){V.val("")}else{var U;Y.siblings("select").find("option").each(function(){if(T==D(this).text().trim().toLowerCase()){U=this.value}});if(!U&&T){V.val(X.invalidAsValue?W:"").change().data("changed",true)}}if(S!==V.val()){V.change().data("changed",true)}});this.on("focus",y+k,function(){if(!this.value.trim()){if(R.data(E).expandOnFocus){D(this).keyup()}}else{if(R[E]("val")){var S=R.children(y+n);S.children().show();a.call(S,"down")}}});this.on("click",y+k+"-div",function(){if(R.data(E).disabled){return}a.call(D(this).siblings(y+n),"down")});this.on("click",y+k,function(T){var S=D(this).closest(y)[0];D(y).each(function(){if(this!=S){D(this)[E]("close")}});T.stopPropagation()});this.on("click",y+d,function(U){U.stopPropagation();var V=D(this),T=V.closest(y);var S=T.children(y+n);if(S.is(":visible")){a.call(S,"up")}else{a.call(S,"down");T.children(y+k).focus()}});this.on("click",y+K,function(U){U.stopPropagation();var V=D(this);var T=V.parent(),S=R.children(y+n);S.children("p").eq(V.data("index")).find(":checkbox").prop("checked",false);T.fadeOut(Q.animation.duration);V.closest(y).children("select").trigger("change",[true])});if(Q.autoLoad!=D.noop){D(y+n,this).scroll(function(){var V=D(this),T=R.children("select");var U=V.scrollTop();var S=50;if(U>V.data("scrollTop")){if(this.scrollHeight-U-S<V.height()){if(!R.data("pending")){R.data("pending",true);Q.autoLoad.call(R,T.find("option[value]:last").val(),"bottom")}}}else{if(U<V.height()/2){if(!R.data("pending")){R.data("pending",true);Q.autoLoad.call(R,T.find("option[value]:first").val(),"top")}}}V.data("scrollTop",U)}).data("scrollTop",0)}if(!v){v=true;D(c).bind("click."+E,function(){D(y).each(function(){a.call(D(this).children(y+n),"up")})})}this.data("listenersAdded",true)}function x(Q){if(typeof Q=="string"){Q=D.parseJSON(Q);if(Q==null){return[]}}if(!Q){return false}if(!(Q instanceof Array)){if(typeof Q!="object"){return false}if(typeof Q.length=="undefined"){Q.length=Object.keys(Q).length}Q=[].slice.call(Q)}return Q}function C(R){for(var Q=0;Q<R.length;Q++){if((!R[Q].value||!R[Q].text)&&!(R[Q].hasOwnProperty("separator"))){R.splice(Q,1)}}}function u(Q){for(var R=0;R<Q.length;R++){if(!Q[R].value&&!D(Q[R]).hasClass(E+g)&&Q[R].tagName.toLowerCase()!="optgroup"){D(Q[R]).remove()}}}function m(S,Q){var T=S.text.trim().toLowerCase(),R=Q.text.trim().toLowerCase();return T>R?1:T==R?0:-1}function q(Q){for(var S=0;S<Q.length;S++){for(var R=S+1;R<Q.length;R++){if(!Q[S]||!Q[R]){continue}if(Q[S].value==Q[R].value){Q.splice(S,1)}}}}function h(Q){for(var S=0;S<Q.length;S++){for(var R=S+1;R<Q.length;R++){if(!Q[S]||!Q[R]){continue}if(Q[S].value==Q[R].value&&Q[S].tagName.toLowerCase()!="optgroup"){D(Q[S]).remove()}}}}function I(){var S=this.children(y+k),R=this.children("select"),V=this.data(E);var U,Q=S.val().trim().toLowerCase();R.find("option").each(function(){if(Q==D(this).text().trim().toLowerCase()){U=this.value}});var T=(!U&&Q);if(T){if(V.forbidInvalid){S.closest(y).find(y+k).val("").data("value","")}else{if(V.highlightInvalid||(V.invalidAsValue?(V.highlightInvalid):V.highlightInvalid===null)){S.addClass(E+w).siblings(y+b).addClass(E+b+w)}}if(!V.invalidAsValue){S.siblings("select, "+y+O).val("")}}else{S.removeClass(E+w).siblings(y+b).removeClass(E+b+w)}}function a(S,Q){if(this.is(":animated")||!this.length){return}if(S=="up"&&this.is(":hidden")&&this.length==1){return}var R=this.parent().data(E).animation;if(!D.easing[R.easing]){console.warn("no such easing: "+R.easing);R.easing="swing"}var V=this.parent(),U=V.data(E);if(S=="up"){U.beforeClose.call(V);R.complete=function(){if(U.mode!="checkboxes"){I.call(V)}U.afterClose.call(V)};this.slideUp(R).data("p-clicked-index",-1);V.children(y+d).removeClass(E+d+"-up")}else{U.beforeOpen.call(V);R.complete=function(){U.afterOpen.call(V)};this.slideDown(R);V.children(y+d).addClass(E+d+"-up")}var T=V.children(y+k);T.each(function(){var W=D(this);if(W.data("fillonarrow")&&!Q){W.data("fillonarrow",false).val(W.data("value"))}})}function M(Y,ae){var U=D(this),Q=U.closest(y),aa=U.parent(),ad=aa.children("p"),X=ad.index(this),R=z(aa.parent().data(E).animation.duration);if(!ae){var Z=U.find(":checkbox");if(!D(Y.target).is(":checkbox")){Z.prop("checked",!Z.prop("checked"))}var S=Z.prop("checked");if(Y.shiftKey){if(aa.data("p-clicked-index")>=0){var W=aa.data("p-clicked-index");var ac=W<X?W:X,ab=W<X?X:W;for(var T=ac;T<=ab;T++){D(ad[T]).find(":checkbox").prop("checked",S)}}}}var V=Q.find(y+P).prepend("<span />");Q.find(y+P).fadeOut(R/5,function(){V.empty().show();ad.each(function(af){var ag=D(this);if(ag.find(":checkbox").prop("checked")){V.append(D("<div />").addClass(E+l).append(D("<div />").addClass(E+l+"-text").text(ag.find(y+t).text())).append(D("<div />").addClass(E+K).text("×").data("index",af)).fadeIn(R*1.5))}});V.append('<div style="clear: both" />')});aa.data("p-clicked-index",X);U.closest(y).children("select").trigger("change",[true])}function J(S,R){var W=this.data(E);var U=this.find("select"),Q=this.find(y+n);for(var V=0;V<S.length;V++){if(S[V].hasOwnProperty("separator")){if(S[V].hasOwnProperty("header")){T=D('<p class="'+E+e+'" />').text(S[V].header)}else{var T=D('<p class="'+E+g+'" />')}var X=D("<option />")}else{X=D("<option />").val(S[V].value).text(S[V].text).prop("selected",!!S[V].selected);T=W.pFillFunc.call(this,S[V],W);if(W.mode=="checkboxes"){T.prepend('<input type="checkbox" />')}}T.data("value",S[V].value);if(R){U.prepend(X);Q.prepend(T)}else{U.append(X);Q.append(T)}}}function j(R){var Q=R.children(y+i+":visible");if(Q.length==0){Q=R.children(":visible:first")}return Q}function p(T){if(T==null){return null}var S=Object.keys(T);for(var Q=0;Q<S.length;Q++){var R=S[Q].replace(/-([a-z])/g,function(U){return U[1].toUpperCase()});if(S[Q]!=R){T[R]=T[S[Q]];delete T[S[Q]]}if(typeof T[R]=="object"&&R!="data"){p(T[R])}}return T}D.fn[E]=function(R){if(typeof R=="string"){if(this.length==0){return this}if(this.data(E+"-init")==null){D.error("Calling "+E+"."+R+" prior to initialization")}var S=F[R];if(!S){D.error("No such method: "+R+" in jQuery."+E+"()")}}else{if(typeof R=="object"||R==null){var Q=D.extend(true,{},D.fn[E].defaults,p(R))}else{D.error("Incorrect usage");return this}}if(S){return S.apply(this,Array.prototype.slice.call(arguments,1))}return this.each(function(){var T=D(this);if(!(T.is("select, div"))){console.warn("target element is incorrect: ",this);return}if(T.is("select")){T.wrap("<div />");if(Q.reassignId){T.parent().attr("id",T.attr("id"))}T=T.parent()}T.data(E,D.extend(true,{},Q));F.init.apply(T)})};D.fn[E].defaults={editAble:true,data:null,empty:false,disabled:false,sort:true,sortAsc:true,removeDuplicates:true,fullMatch:false,highlight:null,filterIgnoreCase:true,hideSeparatorsOnSearch:false,expandOnFocus:true,tabindex:null,forbidInvalid:false,invalidAsValue:false,highlightInvalid:null,reassignId:true,mode:"default",pMarkup:'<span class="'+E+t+'">${text}</span> <span>${additional}</span>',pFillFunc:function(R,Q){return D("<p />").html(Q.pMarkup.replace("${text}",R.text).replace("${additional}",R.additional?R.additional:""))},animation:{duration:"fast",easing:"swing"},listMaxWidth:window.screen.width/2,wrap:true,maxHeight:"",fillOnArrowPress:true,fillOnBlur:false,fillOnTab:true,showDropDown:true,callback:{func:D.noop,args:[]},beforeOpen:D.noop,beforeClose:D.noop,afterOpen:D.noop,afterClose:D.noop,autoLoad:D.noop,loopScrolling:true};D.fn[E].extendDefaults=function(Q){D.extend(true,D.fn[E].defaults,Q)}})(jQuery,document);